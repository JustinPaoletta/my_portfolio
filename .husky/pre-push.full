#!/usr/bin/env sh
# Comprehensive pre-push hook - includes E2E tests
# To use: mv .husky/pre-push .husky/pre-push.light && mv .husky/pre-push.full .husky/pre-push

echo "ğŸ” Running TypeScript type checking..."
tsc -b || {
  echo "âŒ TypeScript compilation failed. Fix type errors before pushing."
  exit 1
}

echo "ğŸ§¹ Running linter on all committed files..."
npm run lint:fix || {
  echo "âŒ Linting failed. Fix linting errors before pushing."
  exit 1
}

echo "ğŸ§ª Running unit tests..."
npm run test:unit || {
  echo "âŒ Unit tests failed. Fix the tests before pushing."
  exit 1
}

echo "ğŸ­ Running E2E tests..."
npm run test:e2e || {
  echo "âŒ E2E tests failed. Fix the tests before pushing."
  echo "ğŸ’¡ Tip: Skip this hook with 'git push --no-verify' if needed."
  exit 1
}

echo "âœ… All checks passed! Proceeding with push..."

