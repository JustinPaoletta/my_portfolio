# light version of pre-push hook - skips e2e tests

. "$(dirname -- "$0")/common.sh"

echo "Running TypeScript type checking..."
tsc -b || {
  echo "❌ TypeScript compilation failed. Fix type errors before pushing."
  exit 1
}

echo "Running production build (type-check + bundle size)..."
npm run build || {
  echo "❌ Build failed. Fix type errors or bundle size limits before pushing."
  echo "  Bundle size limits: vite.config.ts (e.g. CSS ≤ 60 KB, total ≤ 650 KB)"
  exit 1
}

echo "Running unit tests..."
npm run test:unit || {
  echo "❌ Unit tests failed. Fix the tests before pushing."
  exit 1
}

echo "✅ Quick checks passed! (E2E tests skipped for speed)"
echo "Remember to run 'npm run test:e2e' before creating a PR"
