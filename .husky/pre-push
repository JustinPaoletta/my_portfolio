#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running TypeScript type checking..."
tsc -b || {
  echo "❌ TypeScript compilation failed. Fix type errors before pushing."
  exit 1
}

echo "🧪 Running unit tests..."
npm run test:unit || {
  echo "❌ Unit tests failed. Fix the tests before pushing."
  exit 1
}

echo "🎭 Running E2E tests..."
npm run test:e2e || {
  echo "❌ E2E tests failed. Fix the tests before pushing."
  echo "💡 Tip: Skip this hook with 'git push --no-verify' if needed."
  exit 1
}

echo "✅ All checks passed! Proceeding with push..."

